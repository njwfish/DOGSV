{% extends "base.html" %}
{% block content %}
	<style>
		#editor {
    		height:100px;
    		width: 100%;
		}
		*{
		    padding: 0;
		    margin:0;
		}
	</style>
	<h2>Results:</h2>
	<form action="" method="post" name="record">
		<h1>Query</h1>
		<div class="wrapper">
			<div id="editor">{{query}}</div>
			{{form.input_query}}
			<div class="controls">
				<input type="submit" value="Query" id="submit" name="submit" class="btn btn-primary sharp">
			</div>
		</div>
	</form>
	<script src="//ajaxorg.github.io/ace-builds/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
	<script>
		var editor = ace.edit("editor");
		editor.getSession().setUseWorker(false);
		editor.setTheme("ace/theme/textmate");
		editor.getSession().setMode("ace/mode/sql");

	    $(document).ready( function() {
	      $('#submit').click(function(){
	        document.getElementById('input_query').value = editor.getValue();
	      });

	    });

	</script>
	<hr>
	<table >
		<tr>
			{% for h in fields %}
    			<th>{{ h }}</th>
			{% endfor %}
  		</tr>
		{% for t in results %}
			<tr>
				{% for i in t %}
					<td>{{ i }}</td>
				{% endfor %}
			</tr>
		{% endfor %}
	</table>
{% endblock %}